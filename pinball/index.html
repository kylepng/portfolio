<!DOCTYPE html>
<html lang="en-us">
<head>
  <meta charset="utf-8">
  <meta content="text/html; charset=utf-8" http-equiv="Content-Type">
  <title>3D Pinball for Windows - Space Cadet</title>
  <style>
    :root {
      --ActiveBorder: rgb(212, 208, 200);
      --ActiveTitle: rgb(10, 36, 106);
      --AppWorkspace: rgb(128, 128, 128);
      --Background: rgb(58, 110, 165);
      --ButtonFace: rgb(212, 208, 200);
      --ButtonHilight: rgb(255, 255, 255);
      --ButtonLight: rgb(212, 208, 200);
      --ButtonShadow: rgb(128, 128, 128);
      --ButtonDkShadow: rgb(64, 64, 64);
      --ButtonText: rgb(0, 0, 0);
      --GradientActiveTitle: rgb(166, 202, 240);
      --TitleText: rgb(255, 255, 255);
      --WindowText: rgb(0, 0, 0);
    }

    body {
      font-family: Tahoma, Geneva, Verdana, sans-serif;
      background-color: var(--Background);
      text-align: center;
      margin: 0;
      padding: 0;
    }

    canvas.emscripten {
      border: 0 none;
      background-color: #000;
    }

    .window {
      font-size: 8pt;
      color: var(--WindowText);
      background-color: var(--ButtonFace);
      border: 1px solid var(--ActiveBorder);
      box-shadow: -.5px -.5px 0 .5px var(--ButtonHilight), 0 0 0 1px var(--ButtonShadow), -.5px -.5px 0 1.5px var(--ButtonLight), 0 0 0 2px var(--ButtonDkShadow);
      margin-left: auto;
      margin-right: auto;
      display: inline-block;
    }

    .titlebar {
      text-align: start;
      margin: 0;
      padding: 1px;
      display: flex;
      user-select: none;
      background-color: var(--ActiveTitle);
      background-image: linear-gradient(to right, var(--ActiveTitle), var(--GradientActiveTitle));
      color: var(--TitleText);
    }

    .titlebar-title {
      display: flex;
      padding: 0 4px;
      flex-grow: 1;
      font-weight: 700;
      align-items: center;
    }

    #status {
      margin: 20px;
    }

    .instructions {
      background: #1a1a2e;
      color: #eee;
      padding: 10px 15px;
      font-size: 11px;
      text-align: left;
      border-top: 1px solid #333;
    }

    .instructions h4 {
      margin: 0 0 8px 0;
      color: #4fc3f7;
      font-size: 12px;
    }

    .instructions .controls {
      display: grid;
      grid-template-columns: 1fr 1fr;
      gap: 4px 15px;
    }

    .instructions .control {
      display: flex;
      align-items: center;
      gap: 8px;
    }

    .instructions kbd {
      background: #333;
      border: 1px solid #555;
      border-radius: 3px;
      padding: 2px 6px;
      font-family: monospace;
      font-size: 10px;
      min-width: 20px;
      text-align: center;
    }

    .instructions .tip {
      margin-top: 8px;
      color: #888;
      font-style: italic;
    }
  </style>
</head>
<body>
  <div class="active window">
    <div class="titlebar">
      <span class="titlebar-title">3D Pinball for Windows - Space Cadet</span>
    </div>
    <div class="emscripten" id="status">Downloading...</div>
    <div class="emscripten">
      <progress hidden id="progress" max="100" value="0"></progress>
    </div>
    <canvas class="emscripten" id="canvas" oncontextmenu="event.preventDefault()" style="display:none" tabindex="0"></canvas>
    <div class="instructions" id="controls-panel">
      <h4>Controls</h4>
      <div class="controls">
        <div class="control"><kbd>Space</kbd> Launch Ball</div>
        <div class="control"><kbd>F2</kbd> New Game</div>
        <div class="control"><kbd>Z</kbd> Left Flipper</div>
        <div class="control"><kbd>/</kbd> Right Flipper</div>
        <div class="control"><kbd>X</kbd> Nudge Left</div>
        <div class="control"><kbd>.</kbd> Nudge Right</div>
      </div>
      <div class="tip">Click the game area to focus, then use keyboard to play!</div>
    </div>
  </div>

  <script>
    // Auto-focus canvas when loaded
    window.addEventListener('load', function() {
      setTimeout(function() {
        const canvas = document.getElementById('canvas');
        if (canvas) {
          canvas.focus();
        }
      }, 1000);
    });

    // Click anywhere to focus canvas
    document.addEventListener('click', function() {
      const canvas = document.getElementById('canvas');
      if (canvas && canvas.style.display !== 'none') {
        canvas.focus();
      }
    });
  </script>

  <script>
    var statusElement = document.getElementById("status");
    var progressElement = document.getElementById("progress");

    var Module = {
      preRun: [],
      postRun: [],
      print: function() {
        var e = document.getElementById("output");
        return e && (e.value = ""), function(e) {
          arguments.length > 1 && (e = Array.prototype.slice.call(arguments).join(" ")),
          console.log(e)
        }
      }(),
      printErr: function(e) {
        arguments.length > 1 && (e = Array.prototype.slice.call(arguments).join(" ")),
        console.error(e)
      },
      canvas: function() {
        var e = document.getElementById("canvas");
        return e.addEventListener("webglcontextlost", function(e) {
          alert("WebGL context lost. You will need to reload the page."),
          e.preventDefault()
        }, !1), e
      }(),
      setStatus: function(e) {
        if (Module.setStatus.last || (Module.setStatus.last = {time: Date.now(), text: ""}),
            e !== Module.setStatus.last.text) {
          var t = e.match(/([^(]+)\((\d+(\.\d+)?)\/(\d+)\)/),
              n = Date.now();
          if (!(t && n - Module.setStatus.last.time < 30)) {
            if (Module.setStatus.last.time = n, Module.setStatus.last.text = e, t)
              e = t[1],
              progressElement.value = 100 * parseInt(t[2]),
              progressElement.max = 100 * parseInt(t[4]),
              progressElement.hidden = !1;
            else
              progressElement.value = null,
              progressElement.max = null,
              progressElement.hidden = !0,
              document.getElementById("canvas").style.display = "";
            statusElement.innerHTML = e,
            "" === e ? (statusElement.style.display = "none", progressElement.style.display = "none")
                     : (statusElement.style.display = "", progressElement.style.display = "")
          }
        }
      },
      totalDependencies: 0,
      monitorRunDependencies: function(e) {
        this.totalDependencies = Math.max(this.totalDependencies, e),
        Module.setStatus(e ? "Preparing... (" + (this.totalDependencies - e) + "/" + this.totalDependencies + ")" : "All downloads complete.")
      }
    };

    Module.setStatus("Downloading...");
    window.onerror = function() {
      Module.setStatus("Exception thrown, see JavaScript console"),
      Module.setStatus = function(e) {
        e && Module.printErr("[post-exception status] " + e)
      }
    }
  </script>
  <script async src="SpaceCadetPinball.js"></script>
</body>
</html>
